@model IEnumerable<_2210900059_PTQ_DATN.Models.SanPham>

@{
    ViewData["Title"] = "Sản phẩm";
    var danhMucs = ViewBag.DanhMucSanPham as List<_2210900059_PTQ_DATN.Models.DanhMucSanPham>;
    int? danhMucDangChon = ViewBag.DanhMucDangChon as int?;
}
<style>
    .btn-filter {
        padding: 8px 18px;
        border-radius: 8px;
        border: 1px solid #e4dbe6;
        background-color: #fff;
        color: #6b7280;
        font-weight: 500;
        transition: all 0.2s ease;
    }

        .btn-filter:hover {
            background-color: #f9fafb;
            border-color: #d1c4d6;
            color: #374151;
        }

        .btn-filter:active {
            transform: scale(0.97);
        }
</style>

<section class="section products">
    <div class="container">

        <h2 class="section-title">TẤT CẢ SẢN PHẨM</h2>

        <!-- FILTER -->
        <form method="get" class="mb-6" style="text-align:right">
            <select name="danhMucId"
                    onchange="this.form.submit()"
                    style="padding:8px 12px;border-radius:6px;border:1px solid #ddd">
                <option value="">Tất cả danh mục</option>

                @if (danhMucs != null)
                {
                    foreach (var dm in danhMucs)
                    {
                        <option value="@dm.MaDanhMuc"
                                selected="@(danhMucDangChon == dm.MaDanhMuc)">
                            @dm.TenDanhMuc
                        </option>
                    }
                }
            </select>
        </form>

        <div class="product-row">
            @if (Model != null && Model.Any())
            {
                foreach (var sp in Model)
                {
                    <article class="product-card">
                        <div class="product-img">
                            @if (!string.IsNullOrEmpty(sp.HinhAnh))
                            {
                                <img src="@(Url.Content("~/images/products/" + sp.HinhAnh))"
                                     alt="@sp.TenSanPham" />
                            }
                            else
                            {
                                <img src="@(Url.Content("~/images/no-image.png"))"
                                     alt="No image" />
                            }
                        </div>

                        <div class="card-body">
                            <h3>@sp.TenSanPham</h3>

                            <p class="price">
                                @sp.Gia.ToString("N0") đ
                            </p>

                            <a class="btn-outline"
                               href="@Url.Action("ChiTiet", "SanPham", new { id = sp.MaSanPham })">
                                Xem chi tiết
                            </a>
                        </div>
                    </article>
                }
            }
            else
            {
                <p>Không có sản phẩm nào.</p>
            }
        </div>
    </div>
</section>
