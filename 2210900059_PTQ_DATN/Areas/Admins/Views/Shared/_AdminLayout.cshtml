@functions {
    string Normalize(string name)
    {
        if (string.IsNullOrEmpty(name)) return "";
        name = name.Replace("Controller", "", StringComparison.OrdinalIgnoreCase);
        if (name.EndsWith("s", StringComparison.OrdinalIgnoreCase))
            name = name.Substring(0, name.Length - 1);
        return name.ToLower();
    }
}

@{
    var title = ViewData["Title"] ?? "Admin";
    var rawController = (ViewContext.RouteData.Values["controller"] ?? "").ToString();
    var currentController = Normalize(rawController);

    Func<string, string> activeFor = ctrl =>
        currentController == Normalize(ctrl)
            ? "nav-link flex items-center gap-3 px-4 py-3 rounded-lg bg-primary text-white shadow-md shadow-primary/20"
            : "nav-link flex items-center gap-3 px-4 py-3 rounded-lg text-slate-700 hover:bg-slate-100 hover:text-slate-900 transition-colors";
}

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@title - Admin</title>

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Tailwind config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: "#c813ec"
                    },
                    fontFamily: {
                        display: ["Manrope", "system-ui"]
                    }
                }
            }
        }
    </script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">

    <style>
        body {
            font-family: Manrope, system-ui;
        }

        .material-symbols-outlined {
            font-size: 22px;
            line-height: 1;
        }

        /* BẢO HIỂM: menu không bao giờ mất chữ */
        .nav-link {
            min-height: 44px;
            font-weight: 500;
            color: #334155;
            text-decoration: none;
            display: flex;
            align-items: center;
        }
    </style>

    @RenderSection("Styles", required: false)
</head>

<body class="bg-slate-50 min-h-screen">
    <div class="flex h-screen">

        <!-- SIDEBAR -->
        <aside class="w-64 bg-white border-r flex flex-col p-6">

            <!-- TOP -->
            <div class="flex flex-col flex-1">

                <!-- Logo -->
                <div class="flex items-center gap-3 mb-8">
                    <div class="bg-primary/10 p-2 rounded-xl">
                        <span class="material-symbols-outlined text-primary">spa</span>
                    </div>
                    <div>
                        <div class="font-bold text-lg text-slate-800">TQbeauty Admin</div>
                        <div class="text-xs text-slate-500">MANAGEMENT</div>
                    </div>
                </div>

                <!-- MENU (DÀN ĐỀU) -->
                <nav class="flex flex-col flex-1 justify-between">

                    <a asp-area="Admins" asp-controller="Home" asp-action="Index"
                       class="@activeFor("Home")">
                        <span class="material-symbols-outlined">dashboard</span>
                        Dashboard
                    </a>

                    <a asp-area="Admins" asp-controller="NguoiDungs" asp-action="Index"
                       class="@activeFor("NguoiDung")">
                        <span class="material-symbols-outlined">group</span>
                        Người dùng
                    </a>

                    <a asp-area="Admins" asp-controller="DanhMucSanPhams" asp-action="Index"
                       class="@activeFor("DanhMucSanPham")">
                        <span class="material-symbols-outlined">category</span>
                        Danh mục sản phẩm
                    </a>

                    <a asp-area="Admins" asp-controller="SanPhams" asp-action="Index"
                       class="@activeFor("SanPham")">
                        <span class="material-symbols-outlined">inventory_2</span>
                        Sản phẩm
                    </a>

                    <a asp-area="Admins" asp-controller="DichVus" asp-action="Index"
                       class="@activeFor("DichVu")">
                        <span class="material-symbols-outlined">build</span>
                        Dịch vụ
                    </a>

                    <a asp-area="Admins" asp-controller="DonHangs" asp-action="Index"
                       class="@activeFor("DonHang")">
                        <span class="material-symbols-outlined">receipt_long</span>
                        Đơn hàng
                    </a>

                    <a asp-area="Admins" asp-controller="BaiViets" asp-action="Index"
                       class="@activeFor("BaiViet")">
                        <span class="material-symbols-outlined">article</span>
                        Bài viết
                    </a>

                    <a asp-area="Admins" asp-controller="TrangNoiDungs" asp-action="Index"
                       class="@activeFor("TrangNoiDung")">
                        <span class="material-symbols-outlined">description</span>
                        Trang nội dung
                    </a>

                </nav>
            </div>

            <!-- LOGOUT -->
            <a asp-controller="TaiKhoan" asp-action="Logout"
               class="flex items-center gap-2 text-red-600 text-sm hover:text-red-700 mt-6">
                <span class="material-symbols-outlined">logout</span>
                Đăng xuất
            </a>

        </aside>

        <!-- MAIN -->
        <main class="flex-1 flex flex-col overflow-y-auto">
            <header class="bg-white border-b px-6 py-4">
                <h1 class="text-xl font-extrabold text-slate-800">@title</h1>
            </header>

            <section class="p-6">
                @RenderBody()
            </section>
        </main>

    </div>

    @RenderSection("Scripts", required: false)
</body>
</html>
